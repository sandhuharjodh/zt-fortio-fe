(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{5454:(e,t,r)=>{Promise.resolve().then(r.bind(r,2208))},3394:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,GV:()=>c,jL:()=>i});var a=r(8943),n=r(1337),s=r(4551),o=r(3391);let l=(0,a.U1)({reducer:{user:n.Ay,userLoginEvent:s.A}}),i=()=>(0,o.wA)(),c=o.d4,u=l},4551:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,s:()=>s});var a=r(8943);let n=async e=>{console.log(e,"vccvvcvcv");let t=await fetch("http://stgn.appsndevs.com:51878/api/users/fetch-user/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).message||"Login failed");return t.json()},s=(0,a.zD)("auth/userLoginEventsDetail",async(e,t)=>{let{rejectWithValue:r}=t;try{return await n(e)}catch(e){return r(e.message||"Failed to fetch login events.")}}),o=(0,a.Z0)({name:"userLoginEvent",initialState:{userLoginEvent:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.userLoginEvent=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.payload||"Something went wrong."})}}).reducer},1337:(e,t,r)=>{"use strict";r.d(t,{Y4:()=>i,AM:()=>c,Ay:()=>p,ri:()=>d,nt:()=>l});var a=r(8943);let n=async(e,t,r,a)=>{let n=await fetch("http://stgn.appsndevs.com:51878/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,lat:r,long:a})});if(!n.ok)throw Error((await n.json()).message||"Login failed");return n.json()},s=async()=>{let e=await fetch("http://stgn.appsndevs.com:51878/api/users/user-list",{method:"Get",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error((await e.json()).message||"No User Found");return e.json()},o=async e=>{let t=await fetch("http://stgn.appsndevs.com:51878/api/users/user/".concat(e),{method:"Get",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json()).message||"No User Found");return t.json()},l=(0,a.zD)("auth/userDetail",async()=>await s()),i=(0,a.zD)("auth/login",async e=>{let{email:t,password:r,lat:a,long:s}=e;return await n(t,r,a,s)}),c=(0,a.zD)("auth/userById",async e=>await o(e)),u=(0,a.Z0)({name:"user",initialState:{token:null,userDetails:null,userDetailByID:null,isLoading:!1,error:null},reducers:{logout(e){e.token=null,e.userDetails=null,e.isLoading=!1,e.error=null}},extraReducers:e=>{e.addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.isLoading=!1,e.token=t.payload.token,e.userDetails={email:t.payload.email,role:t.payload.role,id:t.payload.id}}).addCase(i.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(l.pending,e=>{e.isLoading=!0,e.error=null}).addCase(l.fulfilled,(e,t)=>{e.isLoading=!1,e.token=t.payload.token,e.userDetails=t.payload}).addCase(l.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(c.pending,e=>{e.isLoading=!0,e.error=null}).addCase(c.fulfilled,(e,t)=>{e.isLoading=!1,e.token=t.payload.token,e.userDetailByID=t.payload}).addCase(c.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{logout:d}=u.actions,p=u.reducer},2208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155);r(9324);var n=r(2115),s=r(6046),o=r(7401);let l=(0,o.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),i=(0,o.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var c=r(3391),u=r(3394),d=r(2888),p=r(1337);let m=()=>{var e,t;let[r,o]=(0,n.useState)(!1),[m,h]=(0,n.useState)(),f=(0,u.jL)(),g=(0,s.useRouter)(),y=(0,c.d4)(e=>e.user);return console.log("userName",y),(0,n.useEffect)(()=>{h(localStorage.getItem("userId")||sessionStorage.getItem("userId"))},[]),(0,n.useEffect)(()=>{m&&f((0,p.AM)(m))},[f,m]),(0,a.jsxs)("header",{className:"bg-sky-600 text-white py-3 px-6 shadow-md flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"ZT Fortio"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{className:"flex items-center text-left focus:outline-none",onClick:()=>{o(!r)},children:[(0,a.jsx)(l,{className:"mr-2 w-6 h-6"}),Array.isArray(null==y?void 0:null===(e=y.userDetailByID)||void 0===e?void 0:e.userlisting)&&(null==y?void 0:null===(t=y.userDetailByID)||void 0===t?void 0:t.userlisting.map(e=>(null==e?void 0:e.name)||"Guest")),(0,a.jsx)(i,{className:"ml-2 w-4 h-4"})]}),r&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white text-black rounded-md shadow-lg z-50",children:(0,a.jsx)("ul",{className:"py-1",children:(0,a.jsxs)("li",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-red-600 font-semibold flex items-center gap-2",onClick:()=>{f((0,p.ri)()),localStorage.removeItem("authToken"),localStorage.removeItem("userId"),g.push("/")},children:[(0,a.jsx)(d.QeK,{className:"text-lg"})," Logout"]})})})]})]})},h=()=>(0,a.jsxs)("footer",{className:"bg-white  text-neutral-800 py-3 px-6 shadow-md flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-right",children:"\xa9 2025, All rights reserved."}),(0,a.jsx)("p",{className:"text-left",children:"Contact Us"})]}),f=e=>{let{children:t,noLayout:r=!1}=e;return r?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(m,{}),(0,a.jsx)("div",{className:"flex flex-1",children:(0,a.jsx)("main",{className:" p-6 w-full",children:t})}),(0,a.jsx)(h,{})]})},g=e=>{let{children:t}=e,r=(0,s.usePathname)();return(0,a.jsx)(f,{noLayout:"/"===r,children:t})},y=e=>{let{children:t}=e;return(0,a.jsx)("html",{lang:"en",children:(0,a.jsx)("body",{children:(0,a.jsx)(c.Kq,{store:u.Ay,children:(0,a.jsx)(g,{children:t})})})})}},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...p}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:i?24*Number(l)/Number(n):l,className:s("lucide",c),...p},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:i,...c}=r;return(0,a.createElement)(l,{ref:o,iconNode:t,className:s("lucide-".concat(n(e)),i),...c})});return r.displayName="".concat(e),r}},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},9324:()=>{},3435:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var a=r(2115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=a.createContext&&a.createContext(n),o=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,n;a=t,n=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>a.createElement(d,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:n,size:s,title:i}=e,u=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,o),d=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==s?a.createElement(s.Consumer,null,e=>t(e)):t(n)}}},e=>{var t=t=>e(e.s=t);e.O(0,[533,844,505,441,517,358],()=>t(5454)),_N_E=e.O()}]);